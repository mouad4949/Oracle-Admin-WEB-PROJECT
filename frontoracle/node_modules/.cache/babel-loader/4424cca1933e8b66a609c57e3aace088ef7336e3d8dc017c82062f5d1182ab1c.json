{"ast":null,"code":"var _jsxFileName = \"E:\\\\101\\\\s3\\\\react\\\\frontoracle\\\\src\\\\pages\\\\GestionUsers\\\\Users.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport UserList from '';\nimport UserModal from '../Component/UsersModal';\nimport { fetchUsers, createUser, updateUser, grantRole } from '../Services/UsersService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Users = () => {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [currentUser, setCurrentUser] = useState({\n    username: '',\n    password: ''\n  });\n  const [isEdit, setIsEdit] = useState(false);\n  useEffect(() => {\n    setLoading(true);\n    fetchUsers().then(data => {\n      setUsers(data);\n      setLoading(false);\n    }).catch(() => setLoading(false));\n  }, []);\n  const handleModalOpen = (user = {\n    username: '',\n    password: ''\n  }) => {\n    setCurrentUser(user);\n    setIsEdit(!!user.id);\n    setIsModalOpen(true);\n  };\n  const handleModalClose = () => {\n    setIsModalOpen(false);\n    setCurrentUser({\n      username: '',\n      password: ''\n    });\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setCurrentUser({\n      ...currentUser,\n      [name]: value\n    });\n  };\n  const handleSubmit = async () => {\n    try {\n      if (isEdit) {\n        await updateUser(currentUser.id, currentUser);\n      } else {\n        await createUser(currentUser);\n      }\n      const updatedUsers = await fetchUsers();\n      setUsers(updatedUsers);\n      handleModalClose();\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  const handleGrantRole = async userId => {\n    try {\n      await grantRole(userId);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => handleModalOpen(),\n      children: \"Ajouter un utilisateur\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(UserList, {\n      users: users,\n      loading: loading,\n      onEdit: handleModalOpen,\n      onGrantRole: handleGrantRole\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(UserModal, {\n      isOpen: isModalOpen,\n      user: currentUser,\n      onClose: handleModalClose,\n      onChange: handleInputChange,\n      onSubmit: handleSubmit,\n      isEdit: isEdit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n};\n_s(Users, \"YEnetYs9NcBFCgRrC1iu1Cr5KnQ=\");\n_c = Users;\nexport default Users;\nvar _c;\n$RefreshReg$(_c, \"Users\");","map":{"version":3,"names":["React","useState","useEffect","UserList","UserModal","fetchUsers","createUser","updateUser","grantRole","jsxDEV","_jsxDEV","Users","_s","users","setUsers","loading","setLoading","isModalOpen","setIsModalOpen","currentUser","setCurrentUser","username","password","isEdit","setIsEdit","then","data","catch","handleModalOpen","user","id","handleModalClose","handleInputChange","e","name","value","target","handleSubmit","updatedUsers","err","console","error","handleGrantRole","userId","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onEdit","onGrantRole","isOpen","onClose","onChange","onSubmit","_c","$RefreshReg$"],"sources":["E:/101/s3/react/frontoracle/src/pages/GestionUsers/Users.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport UserList from '';\r\nimport UserModal from '../Component/UsersModal';\r\nimport { fetchUsers, createUser, updateUser, grantRole } from '../Services/UsersService';\r\n\r\nconst Users = () => {\r\n    const [users, setUsers] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [currentUser, setCurrentUser] = useState({ username: '', password: '' });\r\n    const [isEdit, setIsEdit] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        fetchUsers()\r\n            .then((data) => {\r\n                setUsers(data);\r\n                setLoading(false);\r\n            })\r\n            .catch(() => setLoading(false));\r\n    }, []);\r\n\r\n    const handleModalOpen = (user = { username: '', password: '' }) => {\r\n        setCurrentUser(user);\r\n        setIsEdit(!!user.id);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleModalClose = () => {\r\n        setIsModalOpen(false);\r\n        setCurrentUser({ username: '', password: '' });\r\n    };\r\n\r\n    const handleInputChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setCurrentUser({ ...currentUser, [name]: value });\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        try {\r\n            if (isEdit) {\r\n                await updateUser(currentUser.id, currentUser);\r\n            } else {\r\n                await createUser(currentUser);\r\n            }\r\n            const updatedUsers = await fetchUsers();\r\n            setUsers(updatedUsers);\r\n            handleModalClose();\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    };\r\n\r\n    const handleGrantRole = async (userId) => {\r\n        try {\r\n            await grantRole(userId);\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <button onClick={() => handleModalOpen()}>Ajouter un utilisateur</button>\r\n            <UserList\r\n                users={users}\r\n                loading={loading}\r\n                onEdit={handleModalOpen}\r\n                onGrantRole={handleGrantRole}\r\n            />\r\n            <UserModal\r\n                isOpen={isModalOpen}\r\n                user={currentUser}\r\n                onClose={handleModalClose}\r\n                onChange={handleInputChange}\r\n                onSubmit={handleSubmit}\r\n                isEdit={isEdit}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Users;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}