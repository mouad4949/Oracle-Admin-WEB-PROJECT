{"ast":null,"code":"var _jsxFileName = \"E:\\\\101\\\\s3\\\\react\\\\frontoracle\\\\src\\\\pages\\\\GestionUsers\\\\Users.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport UserList from '../../Component/UsersList';\nimport UserModalCreate from '../../Component/UserModelCreate';\nimport UserModalUpdate from '../../Component/UserModelUpdate';\nimport { fetchUsers, createUser, updateUser, grantRole } from '../../Services/UsersService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Users = () => {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [currentUser, setCurrentUser] = useState({\n    username: '',\n    password: ''\n  });\n  const [isEdit, setIsEdit] = useState(false);\n  const [currentUserUpdate, setCurrentUserUpdate] = useState({\n    username: '',\n    enable: '',\n    defaulttablespacename: '',\n    defaultquot: ''\n  });\n  useEffect(() => {\n    setLoading(true);\n    fetchUsers().then(data => {\n      setUsers(data);\n      setLoading(false);\n    }).catch(() => setLoading(false));\n  }, []);\n  const handleModalOpen = (user = {\n    username: '',\n    password: ''\n  }) => {\n    setCurrentUser(user);\n    setIsEdit(!!user.id);\n    setIsModalOpen(true);\n  };\n  const handleModalClose = () => {\n    setIsModalOpen(false);\n    setCurrentUser({\n      username: '',\n      password: ''\n    });\n  };\n  const handleModalUpdateClose = () => {\n    setIsModalOpen(false);\n    setCurrentUser({\n      username: '',\n      password: '',\n      defaulttablespacename: '',\n      defaultquot: ''\n    });\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setCurrentUser({\n      ...currentUser,\n      [name]: value\n    });\n  };\n  const handleSubmit = async () => {\n    try {\n      if (isEdit) {\n        await updateUser(currentUser.id, currentUser);\n      } else {\n        await createUser(currentUser);\n      }\n      const updatedUsers = await fetchUsers();\n      setUsers(updatedUsers);\n      handleModalClose();\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  const handleGrantRole = async userId => {\n    try {\n      await grantRole(userId);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => handleModalOpen(),\n      className: \"text-2xl font-semibold mb-4 text-green-600\",\n      children: \"Ajouter un utilisateur\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(UserList, {\n      users: users,\n      loading: loading,\n      onEdit: handleModalOpen,\n      onGrantRole: handleGrantRole\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(UserModalCreate, {\n      isOpen: isModalOpen,\n      user: currentUser,\n      onClose: handleModalClose,\n      onChange: handleInputChange,\n      onSubmit: handleSubmit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(UserModalUpdate, {\n      isOpen: isModalOpen,\n      userUpdate: currentUserUpdate,\n      onClose: handleModalUpdateClose,\n      onChange: handleInputChange,\n      onSubmit: handleSubmit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n};\n_s(Users, \"xDteAIjIG9G2shE0379b5kpwXoU=\");\n_c = Users;\nexport default Users;\nvar _c;\n$RefreshReg$(_c, \"Users\");","map":{"version":3,"names":["React","useState","useEffect","UserList","UserModalCreate","UserModalUpdate","fetchUsers","createUser","updateUser","grantRole","jsxDEV","_jsxDEV","Users","_s","users","setUsers","loading","setLoading","isModalOpen","setIsModalOpen","currentUser","setCurrentUser","username","password","isEdit","setIsEdit","currentUserUpdate","setCurrentUserUpdate","enable","defaulttablespacename","defaultquot","then","data","catch","handleModalOpen","user","id","handleModalClose","handleModalUpdateClose","handleInputChange","e","name","value","target","handleSubmit","updatedUsers","err","console","error","handleGrantRole","userId","children","onClick","className","fileName","_jsxFileName","lineNumber","columnNumber","onEdit","onGrantRole","isOpen","onClose","onChange","onSubmit","userUpdate","_c","$RefreshReg$"],"sources":["E:/101/s3/react/frontoracle/src/pages/GestionUsers/Users.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport UserList from '../../Component/UsersList';\r\nimport UserModalCreate from '../../Component/UserModelCreate';\r\nimport UserModalUpdate from '../../Component/UserModelUpdate';\r\nimport { fetchUsers, createUser, updateUser, grantRole } from '../../Services/UsersService';\r\n\r\nconst Users = () => {\r\n    const [users, setUsers] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [currentUser, setCurrentUser] = useState({ username: '', password: '' });\r\n    const [isEdit, setIsEdit] = useState(false);\r\n    const [currentUserUpdate, setCurrentUserUpdate] = useState({ username: '', enable:'',defaulttablespacename:'',defaultquot:'' });\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        fetchUsers()\r\n            .then((data) => {\r\n                setUsers(data);\r\n                setLoading(false);\r\n            })\r\n            .catch(() => setLoading(false));\r\n    }, []);\r\n\r\n    const handleModalOpen = (user = { username: '', password: '' }) => {\r\n        setCurrentUser(user);\r\n        setIsEdit(!!user.id);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleModalClose = () => {\r\n        setIsModalOpen(false);\r\n        setCurrentUser({ username: '', password: '' });\r\n    };\r\n    const handleModalUpdateClose = () => {\r\n        setIsModalOpen(false);\r\n        setCurrentUser({ username: '', password: '' ,defaulttablespacename:'',defaultquot:''});\r\n    };\r\n\r\n    const handleInputChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setCurrentUser({ ...currentUser, [name]: value });\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        try {\r\n            if (isEdit) {\r\n                await updateUser(currentUser.id, currentUser);\r\n            } else {\r\n                await createUser(currentUser);\r\n            }\r\n            const updatedUsers = await fetchUsers();\r\n            setUsers(updatedUsers);\r\n            handleModalClose();\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    };\r\n\r\n    const handleGrantRole = async (userId) => {\r\n        try {\r\n            await grantRole(userId);\r\n        } catch (err) {\r\n            console.error(err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <button onClick={() => handleModalOpen()} className=\"text-2xl font-semibold mb-4 text-green-600\">Ajouter un utilisateur</button>\r\n            <UserList\r\n                users={users}\r\n                loading={loading}\r\n                onEdit={handleModalOpen}\r\n                onGrantRole={handleGrantRole}\r\n            />\r\n            <UserModalCreate\r\n                isOpen={isModalOpen}\r\n                user={currentUser}\r\n                onClose={handleModalClose}\r\n                onChange={handleInputChange}\r\n                onSubmit={handleSubmit}\r\n            />\r\n            <UserModalUpdate\r\n                isOpen={isModalOpen}\r\n                userUpdate={currentUserUpdate}\r\n                onClose={handleModalUpdateClose}\r\n                onChange={handleInputChange}\r\n                onSubmit={handleSubmit}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Users;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}